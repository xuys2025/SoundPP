# SoundPP 产品需求文档 (PRD)

## 1. 引言

### 1.1. 文档目的
本文档旨在明确 SoundPP 应用程序的产品需求，为设计、开发、测试和项目管理团队提供共同的理解和遵循的依据。

### 1.2. 产品概述
SoundPP 是一款桌面应用程序，允许用户通过自定义快捷键在任何时候播放指定的音频片段。它旨在为用户的桌面环境提供即时、个性化的音频反馈，适用于直播、游戏、在线会议、日常娱乐等多种场景。该应用的核心是后台快捷键响应和便捷的音频管理功能。

### 1.3. 目标用户
*   **游戏玩家**：在游戏过程中播放有趣的音效，增加娱乐性。
*   **网络主播/内容创作者**：在直播或视频录制中快速触发音效，提升节目效果。
*   **普通办公用户**：在在线会议或日常工作中播放提示音或趣味音效，调节气氛。
*   **所有希望通过声音来个性化其数字体验的用户**。

## 2. 产品目标与主要特性

### 2.1. 产品愿景
成为用户在桌面环境下最快捷、最易用的个性化音效管理和播放工具。

### 2.2. 主要特性列表
*   **全局快捷键播放**：无论应用是否在前台，都能通过键盘快捷键触发声音播放。
*   **便捷的音频导入**：支持多种主流音频格式，提供简单的导入流程。
*   **音频编辑**：内置基础的音频转码和剪辑功能。
*   **灵活的音频分组**：允许用户创建和管理音频分组。
*   **丰富的元数据支持**：为音频和分组添加描述、备注和快捷键信息。
*   **配置的导入与导出**：方便用户备份、迁移和分享自己的音效库和配置。
*   **跨平台支持**：基于 Electron.js，核心功能支持 Windows、macOS 和 Linux。

## 3. 功能需求

### 3.1. 核心功能：全局快捷键播放
*   **3.1.1. 快捷键设置**：用户可以为任意已导入的音频文件设置一个全局快捷键（不支持为同一音频设置多个快捷键）。
*   **3.1.2. 后台监听**：应用程序在后台运行时，必须能够监听到用户的快捷键操作并立即响应。
*   **3.1.3. 音频播放**：按下快捷键后，系统应以最小延迟播放对应的音频文件。
*   **3.1.4. 快捷键冲突检测**：系统应能提示用户所设置的快捷键是否与系统或其他应用的热键冲突。

### 3.2. 音频管理
*   **3.2.1. 音频导入**
    *   用户可以通过拖拽文件或点击“导入”按钮来添加音频文件。
    *   支持常见的音频格式，如 MP3, WAV, AAC, OGG 等。
    *   导入时，应用应能自动转码为内部统一格式以优化性能。
*   **3.2.2. 音频编辑（切片与转码）**
    *   对于导入的音频，用户可以截取其中的一部分作为独立的音效。
    *   提供简单的波形预览界面，方便用户选择开始和结束点。
    *   编辑后的音频切片可以被保存为新的独立音效。
*   **3.2.3. 音频分组**
    *   用户可以创建自定义的分组来管理音频文件（例如，“游戏音效”，“会议专用”）。
    *   音频文件可以被轻松地在不同分组之间移动。
    *   提供默认分组，如“未分组”。

### 3.3. 元数据与配置
*   **3.3.1. 描述与备注**
    *   用户可以为每个音频文件和每个分组添加文字描述和备注。
    *   此信息将在音频列表中显示，方便用户识别。
*   **3.3.2. 快捷键记录**
    *   在界面上清晰地显示每个音频文件当前绑定的快捷键。

### 3.4. 数据管理
*   **3.4.1. 导入/导出/分享**
    *   用户可以导出整个音效库（包括音频文件、分组、快捷键设置和备注）为一个单独的配置文件或压缩包。
    *   用户可以从配置文件或压缩包中导入数据，以恢复或分享配置。

## 4. 非功能性需求

### 4.1. 性能
*   **低延迟**：从按下快捷键到播放声音的延迟应尽可能低，理想情况下应在100毫秒以内。
*   **低资源占用**：应用在后台待机时，CPU和内存占用应保持在较低水平。

### 4.2. 易用性
*   **直观的界面**：用户界面应简洁明了，新用户无需阅读文档即可完成核心操作。
*   **流畅的交互**：所有操作应有即时反馈，无卡顿。

### 4.3. 兼容性
*   **操作系统**：首要支持 Windows 10/11，并确保在 macOS 和主流 Linux 发行版上也能良好运行。

### 4.4. 技术栈
*   **核心框架**：Electron.js
*   **前端技术**：建议使用现代前端框架，如 Vue.js 或 React。

## 5. UI/UX 设计（高级别）

*   **主窗口**：左侧为音频分组列表，右侧为当前选中分组下的音频文件列表。每个音频文件项都应显示其名称、备注和快捷键。
*   **音频导入/编辑窗口**：一个独立的窗口或模态框，提供文件选择、波形预览和切片工具。
*   **设置窗口**：用于配置应用的通用选项，如默认输出设备等。（不包含开机自启）

## 6. 未来规划
*   **云同步**：允许用户在不同设备间同步自己的音效库和配置。
*   **社区分享**：建立一个平台，让用户可以分享和下载他人创建的音效包。
*   **多媒体支持**：除了音频，未来可考虑支持播放简短的视频片段或GIF。

## 7. 云同步（中心化，账号登录版）

### 7.1 目标与范围（MVP）
- **目标**：提供“登录即同步”的简单体验，支持跨设备同步音效库与关键配置。
- **范围**：
  - 使用中心化服务（SoundPP Cloud）进行同步。
  - 仅客户端侧设计：登录/退出、状态显示、手/自动同步与基本失败重试。
  - 同步对象：音频素材、分组、元数据（描述、备注、标签）、快捷键绑定；不包含系统相关设置（如默认输出设备）。
  - 用户素材上传用于跨设备同步：上传内容仅对本人可见，不参与“音频超市”分发。
  - 冲突策略：以服务器版本为准（last-write-wins），客户端在覆盖前提示摘要。

### 7.2 用户故事
- 我在 A 设备登录后导入并标注音效，回到 B 设备登录同账号即可看到相同内容。
- 我可以在设置页手动点击“立即同步”，也可保持后台自动同步。
- 网络不佳时，客户端应自动重试，并在下次在线时补齐同步。

### 7.3 功能需求（客户端）
- **账号**：登录/退出、持久化登录状态；令牌安全存储（Windows 凭据管理器 / macOS Keychain / Linux Secret Service）。
- **同步**：
  - 自动同步：本地改动后延迟入队；网络恢复后自动重试。
  - 手动同步：用户可一键触发；展示进度与最近成功时间。
  - 差量传输：仅上传/下载变更条目（基于清单 revision 与内容哈希的增量）。
  - 冲突：检测到远端更新且本地有未上传改动时，提示“以云为准”覆盖；提供本地导出备份入口。
- **存储**：本地缓存不变；音频文件按内容哈希去重（客户端内部实现即可）。
- **安全**：全程 TLS；日志不记录敏感字段；错误提示对用户友好。
- **素材上传（用于同步）**：
  - 仅在启用“云同步”后对本人库的缺失素材执行上传；上传前以内容哈希检查云端是否已存在，存在则跳过。
  - 单文件大小 ≤ 50MB；允许类型：MP3/WAV/OGG/AAC；上传失败自动重试（指数退避）。
  - 带宽保护：客户端限速与并发阈值；可在设置中暂停/恢复同步。

### 7.4 UI/UX
- `设置 > 云同步`：登录/退出、账号信息、同步状态（成功/进行中/失败）、“立即同步”按钮、最近同步时间、导出本地备份入口。
- 顶部或状态栏：简单的同步状态指示与失败提醒。

### 7.5 非功能性
- 首次同步 500MB 素材在典型宽带下可在合理时间内完成（不强制指标，后端落地后回填）。
- 增量同步在用户可感知范围内完成（一般 < 10 秒）。

### 7.6 验收标准（MVP）
- 不同设备登录同一账号后，音效库与元数据能自动对齐；手动“立即同步”可随时触发并有可见结果。
- 断网恢复后，自动补齐同步；冲突场景可提示并完成“以云为准”的覆盖，且允许用户事前导出本地备份。

### 7.7 超出范围
- 端到端加密、自定义第三方存储、复杂冲突合并界面：不在本期。
- 后端接口与数据结构细节：后续单独设计。

---

## 8. 音频超市（内部内容分发）

### 8.1 目标与范围（MVP）
- **目标**：在客户端提供“可浏览、可预览、可一键导入”的官方内容超市，由管理员在后端统一上架；暂不开放用户上传。
- **范围**：
  - 仅客户端侧：列表/搜索/筛选，包详情与在线预览，一键导入本地库，更新提示。
  - 内容来源：中心化服务的官方仓库（由管理员维护）。

### 8.2 功能需求（客户端）
- **浏览与搜索**：按分类/标签/关键字浏览；支持“最新/热门/推荐”等简单排序。
- **详情与预览**：展示封面、简介、标签、许可、条目清单；内置音频在线预览。
- **下载与导入**：
  - 一键导入到本地指定分组；命名/快捷键冲突自动处理（追加后缀或不设置快捷键并提示）。
  - 已有版本检测与更新提示；用户可选择覆盖或保留并行版本（简化为覆盖优先）。
- **状态与容错**：下载/导入进度、失败重试、离线缓存已浏览详情页。
- **权限**：不支持用户投稿、评分、评论与举报（后续迭代再议）。
  - 明确界定：音频超市为“官方只读内容”，客户端不提供向超市上传的入口（与云同步的个人素材上传无关）。

### 8.3 UI/UX
- 主导航新增 `音频超市`：瀑布流/网格卡片（封面、标题、标签、简单指标）。
- 详情页：预览播放器、条目列表、许可说明、一键导入按钮。

### 8.4 非功能性
- 详情页加载流畅，常态 < 2s；失败有重试与友好提示。
- 下载可断点续传（如服务端支持），失败率低于可接受阈值（后端落地后回填指标）。

### 8.5 验收标准（MVP）
- 用户可在 `音频超市` 中搜索到官方包，打开详情并在线预览，点击“一键导入”后，包内音效正确出现在本地库指定分组。
- 对已有内容再次导入时，能提示并完成覆盖；导入失败可重试或取消且不影响本地既有内容。

### 8.6 超出范围
- 用户上传/审核/互动体系与后台运营台：本期不设计，待后续。
- 具体后端接口、鉴权与 CDN 形态：后续单独设计。